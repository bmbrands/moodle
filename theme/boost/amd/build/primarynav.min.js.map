{"version":3,"sources":["../src/primarynav.js"],"names":["backdropPromise","getBackdrop","Templates","render","then","html","ModalBackdrop","fail","Notification","exception","togglenavigation","primarynav","document","querySelector","toggleButton","closeButton","page","addEventListener","backdrop","setZIndex","show","style","overflow","hide"],"mappings":"2MAuBA,OACA,O,sDAEIA,CAAAA,CAAe,CAAG,C,CAEhBC,CAAW,CAAG,UAAW,CAC3B,GAAI,CAACD,CAAL,CAAsB,CAClBA,CAAe,CAAGE,UAAUC,MAAV,CAAiB,qBAAjB,CAAwC,EAAxC,EACbC,IADa,CACR,SAASC,CAAT,CAAe,CACjB,MAAO,IAAIC,UAAJ,CAAkBD,CAAlB,CACV,CAHa,EAIbE,IAJa,CAIRC,YAAY,CAACC,SAJL,CAKrB,CAED,MAAOT,CAAAA,CACV,C,oBAE+B,QAAnBU,CAAAA,gBAAmB,EAAM,IAC5BC,CAAAA,CAAU,CAAGC,QAAQ,CAACC,aAAT,CAAuB,aAAvB,CADe,CAE5BC,CAAY,CAAGF,QAAQ,CAACC,aAAT,CAAuB,mBAAvB,CAFa,CAG5BE,CAAW,CAAGH,QAAQ,CAACC,aAAT,CAAuB,kBAAvB,CAHc,CAI5BG,CAAI,CAAGJ,QAAQ,CAACC,aAAT,CAAuB,eAAvB,CAJqB,CAMlC,GAAIF,CAAU,EAAIG,CAAlB,CAAgC,CAC5BA,CAAY,CAACG,gBAAb,CAA8B,OAA9B,CAAuC,UAAM,CACzC,gBAAU,QAAV,CAAoBN,CAApB,CAAgC,MAAhC,EACA,gBAAU,QAAV,CAAoBI,CAApB,CAAiC,QAAjC,EAEAd,CAAW,GAAGG,IAAd,CAAmB,SAAAc,CAAQ,CAAI,CAC3B,GAAI,gBAAU,KAAV,CAAiBP,CAAjB,CAA6B,MAA7B,CAAJ,CAA0C,CACtCO,CAAQ,CAACC,SAAT,CAAmB,IAAnB,EACAD,CAAQ,CAACE,IAAT,GACAJ,CAAI,CAACK,KAAL,CAAWC,QAAX,CAAsB,QACzB,CAJD,IAIO,CACHJ,CAAQ,CAACK,IAAT,GACAP,CAAI,CAACK,KAAL,CAAWC,QAAX,CAAsB,MACzB,CACJ,CATD,CAUH,CAdD,CAeH,CACD,GAAIP,CAAJ,CAAiB,CACbA,CAAW,CAACE,gBAAZ,CAA6B,OAA7B,CAAsC,UAAM,CACxC,gBAAU,QAAV,CAAoBN,CAApB,CAAgC,MAAhC,EACA,gBAAU,QAAV,CAAoBI,CAApB,CAAiC,QAAjC,EACAd,CAAW,GAAGG,IAAd,CAAmB,SAAAc,CAAQ,CAAI,CAC3BA,CAAQ,CAACK,IAAT,GACAP,CAAI,CAACK,KAAL,CAAWC,QAAX,CAAsB,MACzB,CAHD,CAIH,CAPD,CAQH,CACJ,C","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Toggling the visibility of the primary navigation on mobile.\n *\n * @package    theme_boost\n * @copyright  2021 Bas Brands\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\nimport {classUtil} from 'core/utils';\nimport ModalBackdrop from 'core/modal_backdrop';\nimport Templates from 'core/templates';\n\nlet backdropPromise = 0;\n\nconst getBackdrop = function() {\n    if (!backdropPromise) {\n        backdropPromise = Templates.render('core/modal_backdrop', {})\n            .then(function(html) {\n                return new ModalBackdrop(html);\n            })\n            .fail(Notification.exception);\n    }\n\n    return backdropPromise;\n};\n\nexport const togglenavigation = () => {\n    const primarynav = document.querySelector('#primarynav');\n    const toggleButton = document.querySelector('#primarynavtoggle');\n    const closeButton = document.querySelector('#primarynavclose');\n    const page = document.querySelector('#page-wrapper');\n\n    if (primarynav && toggleButton) {\n        toggleButton.addEventListener('click', () => {\n            classUtil('toggle', primarynav, 'show');\n            classUtil('toggle', closeButton, 'd-none');\n\n            getBackdrop().then(backdrop => {\n                if (classUtil('has', primarynav, 'show')) {\n                    backdrop.setZIndex(1020);\n                    backdrop.show();\n                    page.style.overflow = 'hidden';\n                } else {\n                    backdrop.hide();\n                    page.style.overflow = 'auto';\n                }\n            });\n        });\n    }\n    if (closeButton) {\n        closeButton.addEventListener('click', () => {\n            classUtil('toggle', primarynav, 'show');\n            classUtil('toggle', closeButton, 'd-none');\n            getBackdrop().then(backdrop => {\n                backdrop.hide();\n                page.style.overflow = 'auto';\n            });\n        });\n    }\n};\n"],"file":"primarynav.min.js"}