{"version":3,"sources":["../src/primarynav.js"],"names":["backdropPromise","getBackdrop","Templates","render","then","html","ModalBackdrop","fail","Notification","exception","sel","ids","primarynav","togglebutton","pagecontent","closebutton","closeNav","document","querySelector","pageContent","backdrop","hide","style","overflow","showNav","setZIndex","show","togglenavigation","toggleButton","closeButton","addEventListener","window","outerWidth"],"mappings":"2MAuBA,OACA,O,sDAEIA,CAAAA,CAAe,CAAG,C,CAEhBC,CAAW,CAAG,UAAM,CACtB,GAAI,CAACD,CAAL,CAAsB,CAClBA,CAAe,CAAGE,UAAUC,MAAV,CAAiB,qBAAjB,CAAwC,EAAxC,EACbC,IADa,CACR,SAASC,CAAT,CAAe,CACjB,MAAO,IAAIC,UAAJ,CAAkBD,CAAlB,CACV,CAHa,EAIbE,IAJa,CAIRC,YAAY,CAACC,SAJL,CAKrB,CACD,MAAOT,CAAAA,CACV,C,CAEKU,CAAG,CAAG,CACRC,GAAG,CAAE,CACDC,UAAU,CAAE,aADX,CAEDC,YAAY,CAAE,mBAFb,CAGDC,WAAW,CAAE,eAHZ,CAIDC,WAAW,CAAE,kBAJZ,CADG,C,CASNC,CAAQ,CAAG,UAAM,IACbJ,CAAAA,CAAU,CAAGK,QAAQ,CAACC,aAAT,CAAuBR,CAAG,CAACC,GAAJ,CAAQC,UAA/B,CADA,CAEbO,CAAW,CAAGF,QAAQ,CAACC,aAAT,CAAuBR,CAAG,CAACC,GAAJ,CAAQG,WAA/B,CAFD,CAGnB,gBAAU,QAAV,CAAoBF,CAApB,CAAgC,MAAhC,EACAX,CAAW,GAAGG,IAAd,CAAmB,SAAAgB,CAAQ,CAAI,CAC3BA,CAAQ,CAACC,IAAT,GACAF,CAAW,CAACG,KAAZ,CAAkBC,QAAlB,CAA6B,MAChC,CAHD,CAIH,C,CAEKC,CAAO,CAAG,UAAM,IACZZ,CAAAA,CAAU,CAAGK,QAAQ,CAACC,aAAT,CAAuBR,CAAG,CAACC,GAAJ,CAAQC,UAA/B,CADD,CAEZO,CAAW,CAAGF,QAAQ,CAACC,aAAT,CAAuBR,CAAG,CAACC,GAAJ,CAAQG,WAA/B,CAFF,CAGlB,gBAAU,KAAV,CAAiBF,CAAjB,CAA6B,MAA7B,EACAX,CAAW,GAAGG,IAAd,CAAmB,SAAAgB,CAAQ,CAAI,CAC3BA,CAAQ,CAACK,SAAT,CAAmB,IAAnB,EACAL,CAAQ,CAACM,IAAT,GACAP,CAAW,CAACG,KAAZ,CAAkBC,QAAlB,CAA6B,QAChC,CAJD,CAKH,C,oBAE+B,QAAnBI,CAAAA,gBAAmB,EAAM,IAC5BC,CAAAA,CAAY,CAAGX,QAAQ,CAACC,aAAT,CAAuBR,CAAG,CAACC,GAAJ,CAAQE,YAA/B,CADa,CAE5BgB,CAAW,CAAGZ,QAAQ,CAACC,aAAT,CAAuBR,CAAG,CAACC,GAAJ,CAAQI,WAA/B,CAFc,CAG5BH,CAAU,CAAGK,QAAQ,CAACC,aAAT,CAAuBR,CAAG,CAACC,GAAJ,CAAQC,UAA/B,CAHe,CAKlC,GAAIgB,CAAY,EAAIC,CAApB,CAAiC,CAC7BD,CAAY,CAACE,gBAAb,CAA8B,OAA9B,CAAuC,UAAM,CACzC,GAAI,gBAAU,KAAV,CAAiBlB,CAAjB,CAA6B,MAA7B,CAAJ,CAA0C,CACtCI,CAAQ,EACX,CAFD,IAEO,CACHQ,CAAO,EACV,CACJ,CAND,CAOH,CACD,GAAIK,CAAJ,CAAiB,CACbA,CAAW,CAACC,gBAAZ,CAA6B,OAA7B,CAAsC,UAAM,CACxCd,CAAQ,EACX,CAFD,CAGH,CAEDe,MAAM,CAACD,gBAAP,CAAwB,QAAxB,CAAkC,UAAY,CAC1C,GAAwB,GAApB,CAAAC,MAAM,CAACC,UAAX,CAA6B,CACzBhB,CAAQ,EACX,CACJ,CAJD,CAKH,C","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Toggling the visibility of the primary navigation on mobile.\n *\n * @package    theme_boost\n * @copyright  2021 Bas Brands\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\nimport {classUtil} from 'core/utils';\nimport ModalBackdrop from 'core/modal_backdrop';\nimport Templates from 'core/templates';\n\nlet backdropPromise = 0;\n\nconst getBackdrop = () => {\n    if (!backdropPromise) {\n        backdropPromise = Templates.render('core/modal_backdrop', {})\n            .then(function(html) {\n                return new ModalBackdrop(html);\n            })\n            .fail(Notification.exception);\n    }\n    return backdropPromise;\n};\n\nconst sel = {\n    ids: {\n        primarynav: '#primarynav',\n        togglebutton: '#primarynavtoggle',\n        pagecontent: '#page-wrapper',\n        closebutton: '#primarynavclose'\n    }\n};\n\nconst closeNav = () => {\n    const primarynav = document.querySelector(sel.ids.primarynav);\n    const pageContent = document.querySelector(sel.ids.pagecontent);\n    classUtil('remove', primarynav, 'show');\n    getBackdrop().then(backdrop => {\n        backdrop.hide();\n        pageContent.style.overflow = 'auto';\n    });\n};\n\nconst showNav = () => {\n    const primarynav = document.querySelector(sel.ids.primarynav);\n    const pageContent = document.querySelector(sel.ids.pagecontent);\n    classUtil('add', primarynav, 'show');\n    getBackdrop().then(backdrop => {\n        backdrop.setZIndex(1020);\n        backdrop.show();\n        pageContent.style.overflow = 'hidden';\n    });\n};\n\nexport const togglenavigation = () => {\n    const toggleButton = document.querySelector(sel.ids.togglebutton);\n    const closeButton = document.querySelector(sel.ids.closebutton);\n    const primarynav = document.querySelector(sel.ids.primarynav);\n\n    if (toggleButton && closeButton) {\n        toggleButton.addEventListener('click', () => {\n            if (classUtil('has', primarynav, 'show')) {\n                closeNav();\n            } else {\n                showNav();\n            }\n        });\n    }\n    if (closeButton) {\n        closeButton.addEventListener('click', () => {\n            closeNav();\n        });\n    }\n\n    window.addEventListener('resize', function () {\n        if (window.outerWidth > 992) {\n            closeNav();\n        }\n    });\n};\n"],"file":"primarynav.min.js"}