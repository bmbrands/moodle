{"version":3,"sources":["../src/moremenu.js"],"names":["selectors","regions","moredropdown","classes","nav","navlink","dropdownitem","dropdownmoremenu","observed","hidden","autocollapse","container","menu","querySelector","navHeight","offsetHeight","maxHeight","dropdownMenu","dropdown","classList","remove","menuNodes","Array","from","children","reverse","forEach","item","contains","lastNode","removeChild","navLink","prepend","add","insertBefore","init","window","addEventListener"],"mappings":"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","sourcesContent":["import {classUtil} from 'core/utils';\n\nconst selectors = {\n    regions: {\n        moredropdown: '[data-region=\"moredropdown\"]',\n    },\n    classes: {\n        nav: 'nav',\n        navlink: 'nav-link',\n        dropdownitem: 'dropdown-item',\n        dropdownmoremenu: 'dropdownmoremenu',\n        observed: 'observed',\n        hidden: 'd-none',\n    }\n};\n\nconst autocollapse = (container) => {\n\n    const menu = container.querySelector('.' + selectors.classes.nav);\n\n    let navHeight = menu.offsetHeight;\n    const maxHeight = container.offsetHeight;\n\n    const dropdownMenu = menu.querySelector(selectors.regions.moredropdown);\n    const dropdown = menu.querySelector('.' + selectors.classes.dropdownmoremenu);\n\n    if (navHeight > maxHeight) {\n\n        dropdown.classList.remove(selectors.classes.hidden);\n\n        if ('children' in menu) {\n            const menuNodes = Array.from(menu.children).reverse();\n            menuNodes.forEach( (item) => {\n                if (!item.classList.contains(selectors.classes.dropdownmoremenu)) {\n                    if (menu.offsetHeight > maxHeight) {\n                        const lastNode = menu.removeChild(item);\n                        const navLink = lastNode.querySelector('.' + selectors.classes.navlink);\n                        classUtil('replace', navLink, selectors.classes.navlink, selectors.classes.dropdownitem);\n                        dropdownMenu.prepend(lastNode);\n                    }\n                }\n            });\n        }\n    }\n    else {\n        dropdown.classList.add(selectors.classes.hidden);\n\n        if ('children' in dropdownMenu) {\n            const menuNodes = Array.from(dropdownMenu.children);\n            menuNodes.forEach( (item) => {\n                if (menu.offsetHeight < maxHeight) {\n                    const lastNode = dropdownMenu.removeChild(item);\n                    const navLink = lastNode.querySelector('.' + selectors.classes.dropdownitem);\n                    classUtil('replace', navLink, selectors.classes.dropdownitem, selectors.classes.navlink);\n                    menu.insertBefore(lastNode, dropdown);\n                }\n            });\n        }\n\n        navHeight = menu.offsetHeight;\n        if (navHeight > maxHeight) {\n            autocollapse(container);\n        }\n    }\n    classUtil('add', container, selectors.classes.observed);\n};\n\nconst init = container => {\n    // when the page loads\n    autocollapse(container);\n\n    // when the window is resized\n    window.addEventListener('resize', function () {\n        autocollapse(container);\n    });\n};\n\nexport default {\n    init: init,\n};\n"],"file":"moremenu.min.js"}