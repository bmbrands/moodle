{"version":3,"sources":["../src/moremenu.js"],"names":["selectors","actions","more","regions","list","popup","moremenu","classes","observed","listitem","itemmoremenu","hidden","init","menu","querySelector","moreButton","addEventListener","classList","contains","showPopup","hidePopup","window","e","target","matches","add","items","querySelectorAll","callback","forEach","call","item","intersectionRatio","remove","moreElems","moreElemsArray","slice","length","moreElemStrings","map","i","outerHTML","innerHTML","join","observer","IntersectionObserver","root","threshold","observe","setAttribute"],"mappings":"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","sourcesContent":["const selectors = {\n    actions: {\n        more: '[data-action=\"moremenumore\"]',\n    },\n    regions: {\n        list: '[data-region=\"moremenulistitems\"]',\n        popup: '[data-region=\"moremenupopup\"]',\n        moremenu: '[data-region=\"moremenu\"]',\n    },\n    classes: {\n        observed: 'observed',\n        listitem: '.nav-item',\n        itemmoremenu: 'itemoverflow',\n        hidden: 'd-none',\n    }\n};\n\nconst init = menu => {\n    const list = menu.querySelector(selectors.regions.list);\n    const popup = menu.querySelector(selectors.regions.popup);\n    const moreButton = menu.querySelector(selectors.actions.more);\n\n    moreButton.addEventListener('click', () => {\n        if (popup.classList.contains(selectors.classes.hidden)) {\n            showPopup(menu);\n        } else {\n            hidePopup(menu);\n        }\n    });\n\n    // Close the popup on click outside.\n    window.addEventListener('click', (e) => {\n        if (!e.target.matches('.morenav a')) {\n            hidePopup(menu);\n        }\n    });\n\n    if ('IntersectionObserver' in window) {\n        list.classList.add(selectors.classes.observed);\n        const items = list.querySelectorAll(selectors.classes.listitem);\n        const observerSettings = {\n            root: list,\n            threshold: 0.98\n        };\n\n        const callback = (items) => {\n            [].forEach.call(items, (item) => {\n                if (item.intersectionRatio > 0.98) {\n                    item.target.classList.remove(selectors.classes.itemmoremenu);\n                } else {\n                    item.target.classList.add(selectors.classes.itemmoremenu);\n                }\n\n                const moreElems = list.querySelectorAll('.' + selectors.classes.itemmoremenu);\n                const moreElemsArray = [].slice.call(moreElems);\n                if (moreElemsArray.length > 0) {\n                    moreButton.classList.remove(selectors.classes.hidden);\n                    var moreElemStrings = moreElemsArray.map(function (i) {\n                        return i.outerHTML;\n                    });\n                    popup.innerHTML = moreElemStrings.join('');\n                } else {\n                    moreButton.classList.add(selectors.classes.hidden);\n                    hidePopup(menu);\n                    popup.innerHTML = '';\n                }\n            });\n        };\n\n        const observer = new IntersectionObserver(callback, observerSettings);\n\n        [].forEach.call(items, function (item) {\n            observer.observe(item);\n        });\n    }\n};\n\nconst showPopup = (menu) => {\n    const popup = menu.querySelector(selectors.regions.popup);\n    const moreButton = menu.querySelector(selectors.actions.more);\n\n    moreButton.setAttribute('aria-expanded', 'true');\n    popup.classList.remove(selectors.classes.hidden);\n};\n\nconst hidePopup = (menu) => {\n    const popup = menu.querySelector(selectors.regions.popup);\n    const moreButton = menu.querySelector(selectors.actions.more);\n\n    moreButton.setAttribute('aria-expanded', 'false');\n    popup.classList.add(selectors.classes.hidden);\n};\n\nexport default {\n    init: init,\n};\n"],"file":"moremenu.min.js"}